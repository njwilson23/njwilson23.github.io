<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Karta tutorial &mdash; karta 0.4.2 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.4.2',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="karta 0.4.2 documentation" href="index.html" />
    <link rel="next" title="Package reference" href="reference.html" />
    <link rel="prev" title="Installation" href="installation.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="reference.html" title="Package reference"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="installation.html" title="Installation"
             accesskey="P">previous</a> |</li>
        <li><a href="karta-manual.html">karta 0.4.2 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <p><a class="reference external" href="../karta-manual.html">Back to manual</a></p>
<div class="section" id="karta-tutorial">
<h1>Karta tutorial<a class="headerlink" href="#karta-tutorial" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p><em>Karta</em> provides a lightweight set of tools for performing analyses of
geographical data. The organization of karta is around a set of
container classes for vector and raster data with builtin methods for
common tasks. This tutorial provides a brief introduction to some of the
main parts of karta.</p>
<p>Should you come across any mistakes, let me know, or even better,
provide a pull request on
<a class="reference external" href="https://github.com/njwilson23/karta">Github</a>!</p>
<p>The following exmaples are shown using Python 3, however <em>Karta</em> is
supported on both Python 2.7+ and Python 3.2+.</p>
</div>
<div class="section" id="definitions">
<h2>Definitions<a class="headerlink" href="#definitions" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>Vector data</strong> in data can is treated as a set of connected or
disconnected vertices. Examples might be road networks, a set of
borders, geophysical survey lines, or the path taken by a bottle
floating in an ocean current. In karta, these data are classified as
belonging to <em>Point</em>, <em>Multipoint</em>, <em>Line</em> or <em>Polygon</em> classes. Some
questions that might be asked of vector data include</li>
<li>which of these points are contained in this polygon?</li>
<li>how many times and where do these lines intersect each other?</li>
<li>what is the average distance travelled by a particle?</li>
<li><strong>Raster data</strong>, in contrast, is data that are typically thought of
in terms of pixels or a grid of values covering a surface. Examples
might be an elevation map, satellite image, or an upstream area map.
Operations on raster data might include slope, aspect, and curvature
calculations, up and downsampling, and interpolation.</li>
<li>The term <strong>coordinate reference system</strong> refers to a system of
relating measurements on a coordinate system to actual positions in
space, e.g. on the curved surface of the Earth. karta includes very
basic support of projected and geographical coordinates, but
extending this system through <em>pyproj</em> is something I would like to
accomplish in the future.</li>
</ul>
</div>
<div class="section" id="vector-data">
<h2>Vector data<a class="headerlink" href="#vector-data" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s experiment with some vector data.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">karta.vector</span> <span class="kn">import</span> <span class="n">Point</span><span class="p">,</span> <span class="n">Multipoint</span><span class="p">,</span> <span class="n">Line</span><span class="p">,</span> <span class="n">Polygon</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">Point</span></tt>, <tt class="docutils literal"><span class="pre">Multipoint</span></tt>, <tt class="docutils literal"><span class="pre">Line</span></tt>, and <tt class="docutils literal"><span class="pre">Polygon</span></tt> classes can all
be instantiated by providing vertices, and optionally, associated data
and metadata.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">pt</span> <span class="o">=</span> <span class="n">Point</span><span class="p">((</span><span class="o">-</span><span class="mf">123.1</span><span class="p">,</span> <span class="mf">49.25</span><span class="p">))</span>

<span class="n">mpt</span> <span class="o">=</span> <span class="n">Multipoint</span><span class="p">([(</span><span class="o">-</span><span class="mf">122.93</span><span class="p">,</span> <span class="mf">48.62</span><span class="p">),</span>
                  <span class="p">(</span><span class="o">-</span><span class="mf">123.10</span><span class="p">,</span> <span class="mf">48.54</span><span class="p">),</span>
                  <span class="p">(</span><span class="o">-</span><span class="mf">122.90</span><span class="p">,</span> <span class="mf">48.49</span><span class="p">),</span>
                  <span class="p">(</span><span class="o">-</span><span class="mf">122.81</span><span class="p">,</span> <span class="mf">48.56</span><span class="p">)])</span>

<span class="n">line</span> <span class="o">=</span> <span class="n">Line</span><span class="p">([(</span><span class="o">-</span><span class="mf">124.35713</span><span class="p">,</span> <span class="mf">49.31437</span><span class="p">),</span>
             <span class="p">(</span><span class="o">-</span><span class="mf">124.37857</span><span class="p">,</span> <span class="mf">49.31720</span><span class="p">),</span>
             <span class="p">(</span><span class="o">-</span><span class="mf">124.39442</span><span class="p">,</span> <span class="mf">49.31833</span><span class="p">),</span>
             <span class="p">(</span><span class="o">-</span><span class="mf">124.40311</span><span class="p">,</span> <span class="mf">49.31942</span><span class="p">),</span>
             <span class="p">(</span><span class="o">-</span><span class="mf">124.41052</span><span class="p">,</span> <span class="mf">49.32203</span><span class="p">),</span>
             <span class="p">(</span><span class="o">-</span><span class="mf">124.41681</span><span class="p">,</span> <span class="mf">49.32477</span><span class="p">),</span>
             <span class="p">(</span><span class="o">-</span><span class="mf">124.42278</span><span class="p">,</span> <span class="mf">49.32588</span><span class="p">)])</span>

<span class="n">poly</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">([(</span><span class="o">-</span><span class="mf">25.41</span><span class="p">,</span> <span class="mf">67.03</span><span class="p">),</span>
                <span class="p">(</span><span class="o">-</span><span class="mf">24.83</span><span class="p">,</span> <span class="mf">62.92</span><span class="p">),</span>
                <span class="p">(</span><span class="o">-</span><span class="mf">12.76</span><span class="p">,</span> <span class="mf">63.15</span><span class="p">),</span>
                <span class="p">(</span><span class="o">-</span><span class="mf">11.44</span><span class="p">,</span> <span class="mf">66.82</span><span class="p">)])</span>

<span class="k">print</span><span class="p">(</span><span class="n">pt</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">mpt</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>Point((-123.1, 49.25))
&lt;class &#39;karta.vector.guppy.Multipoint&#39;([(-122.93, 48.62), (-123.1, 48.54), (-122.9, 48.49), (-122.81, 48.56)])&gt;
&lt;class &#39;karta.vector.guppy.Line&#39;([(-124.35713, 49.31437), (-124.37857, 49.3172)...(-124.41681, 49.32477), (-124.42278, 49.32588)])&gt;
&lt;class &#39;karta.vector.guppy.Polygon&#39;([(-25.41, 67.03), (-24.83, 62.92), (-12.76, 63.15), (-11.44, 66.82)])&gt;
</pre></div>
</div>
<p>Each geometrical object now contains a vertex/vertices in a cartesian
plane.</p>
<p>We may be interested in determining whether our point is within our
polygon</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="k">print</span><span class="p">(</span><span class="n">poly</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">pt</span><span class="p">))</span>       <span class="c"># False</span>

<span class="n">pt2</span> <span class="o">=</span> <span class="n">Point</span><span class="p">((</span><span class="o">-</span><span class="mi">25</span><span class="p">,</span> <span class="mi">65</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">poly</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">pt2</span><span class="p">))</span>      <span class="c"># True</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="bp">False</span>
<span class="bp">True</span>
</pre></div>
</div>
<p>or whether our line crosses the polygon</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="k">print</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">intersects</span><span class="p">(</span><span class="n">poly</span><span class="p">))</span>   <span class="c"># False</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="bp">False</span>
</pre></div>
</div>
<p>There are methods for computing the nearest vertex to an external point,
or the nearest point on an edge to an external point:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">pt</span> <span class="o">=</span> <span class="n">Point</span><span class="p">((</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">60.0</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">poly</span><span class="o">.</span><span class="n">nearest_point_to</span><span class="p">(</span><span class="n">pt</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">poly</span><span class="o">.</span><span class="n">nearest_on_boundary</span><span class="p">(</span><span class="n">pt</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Point</span><span class="p">((</span><span class="o">-</span><span class="mf">12.76</span><span class="p">,</span> <span class="mf">63.15</span><span class="p">))</span>
<span class="n">Point</span><span class="p">((</span><span class="o">-</span><span class="mf">12.301580009598124</span><span class="p">,</span> <span class="mf">64.42454648846582</span><span class="p">))</span>
</pre></div>
</div>
<p>The vertices of multiple vertex objects can be iterated through and
sliced:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">subline</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
<span class="k">for</span> <span class="n">pt_</span> <span class="ow">in</span> <span class="n">subline</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">pt_</span><span class="o">.</span><span class="n">vertex</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="p">(</span><span class="o">-</span><span class="mf">124.39442</span><span class="p">,</span> <span class="mf">49.31833</span><span class="p">)</span>
<span class="p">(</span><span class="o">-</span><span class="mf">124.40311</span><span class="p">,</span> <span class="mf">49.31942</span><span class="p">)</span>
<span class="p">(</span><span class="o">-</span><span class="mf">124.41052</span><span class="p">,</span> <span class="mf">49.32203</span><span class="p">)</span>
</pre></div>
</div>
<p>A slice that takes part of a polygon returns a line.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="k">print</span><span class="p">(</span><span class="n">poly</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>&lt;class &#39;karta.vector.guppy.Line&#39;([(-25.41, 67.03), (-24.83, 62.92)])&gt;
</pre></div>
</div>
<p>Points have a <tt class="docutils literal"><span class="pre">distance</span></tt> that calculates the distance to another
point. However, if we do</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">pt</span> <span class="o">=</span> <span class="n">Point</span><span class="p">((</span><span class="o">-</span><span class="mf">123.1</span><span class="p">,</span> <span class="mf">49.25</span><span class="p">))</span>
<span class="n">pt2</span> <span class="o">=</span> <span class="n">Point</span><span class="p">((</span><span class="o">-</span><span class="mf">70.66</span><span class="p">,</span> <span class="mf">41.52</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">pt</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="n">pt2</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="mf">53.00666508061746</span>
</pre></div>
</div>
<p>this probably isn&#8217;t what we wanted. Be default, geometries in Karta use
a planar cartesian coordinate system. If our positions are meant to be
geographical coordinates, then we can provide the <tt class="docutils literal"><span class="pre">crs</span></tt> argument to
each geometry at creation, as in</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">karta</span> <span class="kn">import</span> <span class="n">crs</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">pt</span> <span class="o">=</span> <span class="n">Point</span><span class="p">((</span><span class="o">-</span><span class="mf">123.1</span><span class="p">,</span> <span class="mf">49.25</span><span class="p">),</span> <span class="n">crs</span><span class="o">=</span><span class="n">crs</span><span class="o">.</span><span class="n">LONLAT</span><span class="p">)</span>
<span class="n">pt2</span> <span class="o">=</span> <span class="n">Point</span><span class="p">((</span><span class="o">-</span><span class="mf">70.66</span><span class="p">,</span> <span class="mf">41.52</span><span class="p">),</span> <span class="n">crs</span><span class="o">=</span><span class="n">crs</span><span class="o">.</span><span class="n">LONLAT</span><span class="p">)</span>
<span class="n">pt</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="n">pt2</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="mf">4109559.587727985</span>
</pre></div>
</div>
<p>which now gives the great circle distance between point on the Earth, in
meters.</p>
<p>When the coordinate system is specified, all geometrical methods obey
that coordinate system. We can use this to perform queries, such which
American state capitols are within 2000 km of Mexico City?</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">karta.examples</span> <span class="kn">import</span> <span class="n">us_capitols</span>
<span class="n">mexico_city</span> <span class="o">=</span> <span class="n">Point</span><span class="p">((</span><span class="o">-</span><span class="mf">99.13</span><span class="p">,</span> <span class="mf">19.43</span><span class="p">),</span> <span class="n">crs</span><span class="o">=</span><span class="n">crs</span><span class="o">.</span><span class="n">LONLAT</span><span class="p">)</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="c"># List all US state capitols</span>
<span class="k">for</span> <span class="n">capitol</span> <span class="ow">in</span> <span class="n">us_capitols</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">capitol</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s">&quot;n&quot;</span><span class="p">],</span> <span class="n">capitol</span><span class="o">.</span><span class="n">vertex</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>Phoenix, Arizona, United States (-112.1, 33.57)
Sacramento, California, United States (-121.5, 38.57)
Atlanta, Georgia, United States (-84.42, 33.76)
Indianapolis, Indiana, United States (-86.15, 39.78)
Helena, Montana, United States (-112.0, 46.6)
Columbus, Ohio, United States (-82.99, 39.98)
Richmond, Virginia, United States (-77.48, 37.53)
Topeka, Kansas, United States (-95.69, 39.04)
Boston, Massachusetts, United States (-71.02, 42.33)
Lincoln, Nebraska, United States (-96.68, 40.81)
Oklahoma City, Oklahoma, United States (-97.51, 35.47)
Juneau, Alaska, United States (-134.2, 58.37)
Pierre, South Dakota, United States (-100.3, 44.38)
Honolulu, Hawaii, United States (-157.8, 21.31)
Montgomery, Alabama, United States (-86.27, 32.35)
Little Rock, Arkansas, United States (-92.36, 34.73)
Denver, Colorado, United States (-104.9, 39.76)
Hartford, Connecticut, United States (-72.68, 41.77)
Dover, Delaware, United States (-75.52, 39.16)
Washington, District of Columbia, United States (-77.02, 38.9)
Tallahassee, Florida, United States (-84.25, 30.46)
Boise, Idaho, United States (-116.2, 43.6)
Springfield, Illinois, United States (-89.67, 39.76)
Des Moines, Iowa, United States (-93.62, 41.57)
Frankfort, Kentucky, United States (-84.87, 38.19)
Baton Rouge, Louisiana, United States (-91.13, 30.45)
Augusta, Maine, United States (-69.73, 44.33)
Annapolis, Maryland, United States (-76.51, 38.97)
Lansing, Michigan, United States (-84.56, 42.71)
Saint Paul, Minnesota, United States (-93.1, 44.95)
Jackson, Mississippi, United States (-90.21, 32.32)
Jefferson City, Missouri, United States (-92.18, 38.57)
Carson City, Nevada, United States (-119.7, 39.15)
Concord, New Hampshire, United States (-71.56, 43.23)
Trenton, New Jersey, United States (-74.76, 40.22)
Santa Fe, New Mexico, United States (-106.0, 35.67)
Albany, New York, United States (-73.8, 42.67)
Raleigh, North Carolina, United States (-78.64, 35.83)
Bismarck, North Dakota, United States (-100.8, 46.81)
Salem, Oregon, United States (-123.0, 44.92)
Harrisburg, Pennsylvania, United States (-76.89, 40.28)
Providence, Rhode Island, United States (-71.42, 41.82)
Columbia, South Carolina, United States (-81.01, 34.02)
Nashville, Tennessee, United States (-86.78, 36.17)
Austin, Texas, United States (-97.76, 30.31)
Salt Lake City, Utah, United States (-111.9, 40.78)
Montpelier, Vermont, United States (-72.57, 44.27)
Olympia, Washington, United States (-122.9, 47.04)
Charleston, West Virginia, United States (-81.63, 38.35)
Madison, Wisconsin, United States (-89.43, 43.09)
Cheyenne, Wyoming, United States (-104.8, 41.15)
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="c"># Filter those within 2000 km of Mexico City</span>
<span class="n">nearby</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">pt</span><span class="p">:</span> <span class="n">pt</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="n">mexico_city</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">2000e3</span><span class="p">,</span> <span class="n">us_capitols</span><span class="p">))</span>
<span class="k">for</span> <span class="n">capitol</span> <span class="ow">in</span> <span class="n">nearby</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">capitol</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s">&quot;n&quot;</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>Oklahoma City, Oklahoma, United States
Montgomery, Alabama, United States
Little Rock, Arkansas, United States
Tallahassee, Florida, United States
Baton Rouge, Louisiana, United States
Jackson, Mississippi, United States
Santa Fe, New Mexico, United States
Austin, Texas, United States
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="c"># Or, list capitols from nearest to furthest from Mexico City</span>
<span class="n">distances</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">pt</span><span class="p">:</span> <span class="n">mexico_city</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="n">pt</span><span class="p">),</span> <span class="n">us_capitols</span><span class="p">)</span>
<span class="n">distances_capitols</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">distances</span><span class="p">,</span> <span class="n">us_capitols</span><span class="p">))</span>
<span class="k">for</span> <span class="n">d</span><span class="p">,</span> <span class="n">pt</span> <span class="ow">in</span> <span class="n">distances_capitols</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;{km:.0f} km, {name}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">km</span><span class="o">=</span><span class="n">d</span><span class="o">/</span><span class="mf">1e3</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">pt</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s">&quot;n&quot;</span><span class="p">]))</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>1213 km, Austin, Texas, United States
1463 km, Baton Rouge, Louisiana, United States
1683 km, Jackson, Mississippi, United States
1785 km, Oklahoma City, Oklahoma, United States
1822 km, Little Rock, Arkansas, United States
1922 km, Santa Fe, New Mexico, United States
1923 km, Montgomery, Alabama, United States
1933 km, Tallahassee, Florida, United States
2027 km, Phoenix, Arizona, United States
2155 km, Atlanta, Georgia, United States
2199 km, Topeka, Kansas, United States
2214 km, Nashville, Tennessee, United States
2225 km, Jefferson City, Missouri, United States
2320 km, Denver, Colorado, United States
2382 km, Lincoln, Nebraska, United States
2414 km, Columbia, South Carolina, United States
2429 km, Springfield, Illinois, United States
2467 km, Cheyenne, Wyoming, United States
2495 km, Frankfort, Kentucky, United States
2510 km, Des Moines, Iowa, United States
2576 km, Indianapolis, Indiana, United States
2661 km, Salt Lake City, Utah, United States
2694 km, Charleston, West Virginia, United States
2708 km, Raleigh, North Carolina, United States
2752 km, Columbus, Ohio, United States
2769 km, Pierre, South Dakota, United States
2777 km, Madison, Wisconsin, United States
2885 km, Saint Paul, Minnesota, United States
2904 km, Richmond, Virginia, United States
2922 km, Lansing, Michigan, United States
2947 km, Carson City, Nevada, United States
3025 km, Sacramento, California, United States
3030 km, Washington, District of Columbia, United States
3041 km, Bismarck, North Dakota, United States
3070 km, Annapolis, Maryland, United States
3118 km, Boise, Idaho, United States
3137 km, Harrisburg, Pennsylvania, United States
3150 km, Dover, Delaware, United States
3235 km, Helena, Montana, United States
3274 km, Trenton, New Jersey, United States
3506 km, Albany, New York, United States
3517 km, Hartford, Connecticut, United States
3585 km, Salem, Oregon, United States
3605 km, Providence, Rhode Island, United States
3665 km, Boston, Massachusetts, United States
3688 km, Concord, New Hampshire, United States
3696 km, Montpelier, Vermont, United States
3748 km, Olympia, Washington, United States
3879 km, Augusta, Maine, United States
5172 km, Juneau, Alaska, United States
6093 km, Honolulu, Hawaii, United States
</pre></div>
</div>
<p>All of the above calculations are performed on a geoid. The
<tt class="docutils literal"><span class="pre">crs.LONLAT</span></tt> coordinate system is just a <em>Karta</em> shorthand for WGS 84
with geographical coordinates.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">crs</span><span class="o">.</span><span class="n">LONLAT_WGS84</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>geographical CRS (urn: {&#39;urn&#39;: &#39;urn:ogc:def:crs:EPSG::4326&#39;})
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">crs</span><span class="o">.</span><span class="n">LONLAT</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>geographical CRS (urn: {&#39;urn&#39;: &#39;urn:ogc:def:crs:EPSG::4326&#39;})
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">crs</span><span class="o">.</span><span class="n">LONLAT</span> <span class="o">==</span> <span class="n">crs</span><span class="o">.</span><span class="n">LONLAT_WGS84</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="bp">True</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">crs</span><span class="o">.</span><span class="n">LONLAT</span> <span class="o">==</span> <span class="n">crs</span><span class="o">.</span><span class="n">LONLAT_NAD83</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="bp">False</span>
</pre></div>
</div>
<p><strong>TODO: describe other geometries</strong></p>
<div class="section" id="associated-data">
<h3>Associated data<a class="headerlink" href="#associated-data" title="Permalink to this headline">¶</a></h3>
<p>By using the <tt class="docutils literal"><span class="pre">data</span></tt> keyword argument, additional data can be
associated with a vector geometry.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">mp</span> <span class="o">=</span> <span class="n">Multipoint</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)],</span>
                <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s">&quot;species&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s">&quot;T. officianale&quot;</span><span class="p">,</span> <span class="s">&quot;C. tectorum&quot;</span><span class="p">,</span>
                                  <span class="s">&quot;M. alba&quot;</span><span class="p">,</span> <span class="s">&quot;V. cracca&quot;</span><span class="p">]})</span>
</pre></div>
</div>
<p>The data can be a list or a dictionary of lists, and are propogated
through subsequent operations.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">pt</span> <span class="o">=</span> <span class="n">mp</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

<span class="k">print</span><span class="p">(</span><span class="n">pt</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">pt</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="s">&quot;species&quot;</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Point</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">M</span><span class="o">.</span> <span class="n">alba</span>
</pre></div>
</div>
<p>Metadata at the geometry level rather than the point level can be
provided using the <tt class="docutils literal"><span class="pre">properties</span></tt> keyword argument, which accepts a
dictionary. Derived geometries carry the properties of their parent
geometry.</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">poly</span> <span class="o">=</span> <span class="n">Polygon</span><span class="p">([(</span><span class="o">-</span><span class="mf">25.41</span><span class="p">,</span> <span class="mf">67.03</span><span class="p">),</span>
                <span class="p">(</span><span class="o">-</span><span class="mf">24.83</span><span class="p">,</span> <span class="mf">62.92</span><span class="p">),</span>
                <span class="p">(</span><span class="o">-</span><span class="mf">12.76</span><span class="p">,</span> <span class="mf">63.15</span><span class="p">),</span>
                <span class="p">(</span><span class="o">-</span><span class="mf">11.44</span><span class="p">,</span> <span class="mf">66.82</span><span class="p">)],</span>
               <span class="n">properties</span><span class="o">=</span><span class="p">{</span><span class="s">&quot;geology&quot;</span><span class="p">:</span> <span class="s">&quot;volcanic&quot;</span><span class="p">,</span>
                           <span class="s">&quot;alcohol&quot;</span><span class="p">:</span> <span class="s">&quot;brennivin&quot;</span><span class="p">})</span>

<span class="k">print</span><span class="p">(</span><span class="n">poly</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">])</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>&lt;class &#39;karta.vector.guppy.Line&#39;([(-25.41, 67.03), (-24.83, 62.92), (-12.76, 63.15)])&gt;
</pre></div>
</div>
</div>
<div class="section" id="visualizing-and-importing-exporting-data">
<h3>Visualizing and importing/exporting data<a class="headerlink" href="#visualizing-and-importing-exporting-data" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">get_coordinate_lists</span></tt> method provides lists of coordinates, which
make is easy to visualize a geometry.</p>
<div class="code python highlight-python"><div class="highlight"><pre>import matplotlib.pyplot as plt
%matplotlib qt
plt.plot(*line.get_coordinate_lists())
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>[&lt;matplotlib.lines.Line2D at 0x7f0b978bd3c8&gt;]
</pre></div>
</div>
<p>Data can be read from several common formats, including ESRI shapefiles
(through bindings to the <em>pyshp</em> module), GeoJSON, GPX, and comma
separated value tables. Convenience functions are kept in the
<tt class="docutils literal"><span class="pre">karta.vector.read</span></tt> namespace.</p>
<p>Each geometry has appropriate methods to save data:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="n">mp</span><span class="o">.</span><span class="n">to_vtk</span><span class="p">(</span><span class="s">&quot;my_vtk.vtk&quot;</span><span class="p">)</span>
<span class="n">line</span><span class="o">.</span><span class="n">to_shapefile</span><span class="p">(</span><span class="s">&quot;my_shapefile&quot;</span><span class="p">)</span>
<span class="n">poly</span><span class="o">.</span><span class="n">to_geojson</span><span class="p">(</span><span class="s">&quot;my_json.json&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>&lt;karta.vector.geojson.GeoJSONWriter at 0x7f0b978f0c18&gt;
</pre></div>
</div>
</div>
</div>
<div class="section" id="raster-data">
<h2>Raster data<a class="headerlink" href="#raster-data" title="Permalink to this headline">¶</a></h2>
<p><strong>WIP</strong></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="karta-manual.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Karta tutorial</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#definitions">Definitions</a></li>
<li><a class="reference internal" href="#vector-data">Vector data</a><ul>
<li><a class="reference internal" href="#associated-data">Associated data</a></li>
<li><a class="reference internal" href="#visualizing-and-importing-exporting-data">Visualizing and importing/exporting data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#raster-data">Raster data</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="installation.html"
                        title="previous chapter">Installation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="reference.html"
                        title="next chapter">Package reference</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/tutorial.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Nat Wilson.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.2.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.6.2</a>
      
      |
      <a href="_sources/tutorial.txt"
          rel="nofollow">Page source</a></li>
    </div>

    

    
  </body>
</html>